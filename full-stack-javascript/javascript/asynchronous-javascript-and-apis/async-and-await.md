# Async and Await

## Introduction

`async` and `await` are two keywords that can help make async code read more
like sync code. This can help code look cleaner while keeping the benefits of
async code.

## The async keyword

The `async` keyword is what lets the JS engine know that you are declaring an
async function. This is required to use `await` inside any function. When a
function is declared with `async`, it automatically returns a promise; return
in an `async` is the same as resolving a promise. Likewise, throwing an error
will reject the promise.

> `async` functions are just syntactical sugar for `promises`.

The `async` keyword can also be used with any of the ways a function can be
created. Said differently, it is valid to use an `async` function anywhere you
can use a normal function.

## The await keyword

`await` tells JS to wait rfor an async action to finish before continuing the
function. It's like a 'pause until done' keyword. The `await` keyword is used
to get a value from a function where you would normally use `.then()`. Instead
of calling `.then()` after the async function, you would assign a variable to
the result using `await`. Then you can use the result in your code as you would
in your sync code.

## Error handling

Since async functions just return a promise, you can call the function, and
append a `.catch()` method to the end.

But there is another way: the mighty **try/catch** block. If you want to handle
the error directly inside the async function, you can use `try/catch` with
`await/async` syntax. If JS throws an error in the `try` block, the `catch`
block code will run instead.

## Practice

## Assignment

### [Async/await](https://javascript.info/async-await)

#### Async functions

`async` ensures that the function returns a promise, and wraps non-oopromises
in it.

#### Await

The keyword `await` makes JS wait until that promise settles and returns its
result.

> `await` literraly suspends the function execution until the promise settles,
> and then resumes it with the promise result.
>
> **Can't use `await` in regular function**
>
> **Modern browsers allow tio-level `await` in modules**
>
> **`await` accepts "thenables"**
>
> > The idea is that a third-party object may not be a promise, but
> > promise-compatible.
>
> Async class methods

#### Error handling

```javascript
async function f() {
  await Promise.reject(new Error("Oops"));
}

async function f() {
  throw new Error("Oops");
}
```

Both are equivalent.

In real situations, the promise may take some time before it rejects. In that
case, there will be a delay before `await` throws an error.

We can catch that error using `try...catch`, the same way as a regular `throw`.

If we don't have `try...catch`, then the promise generated by the call of the
async function becomes rejected. We can append `.catch` to handle it.

> **`async/await` and `promise.then/catch`**
>
> > At the top level of the code, when we're outside any `async` function,
> > we're unable to use `await`, so it's a normal practice to add `.then/catch`
> > to handle the final result or failing-through error.
>
> **`async/await` works well with `Promise.all`**
